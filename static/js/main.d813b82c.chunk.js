(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{128:function(e,t,a){e.exports=a.p+"static/media/weather.cf735531.svg"},129:function(e,t,a){"use strict";a.r(t),a.d(t,"storageService",(function(){return r}));var r={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}}},130:function(e,t,a){e.exports=a.p+"static/media/logo.1ecdd7e1.svg"},131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),i=a.n(c),s=a(18),o=a(23),u=a(171),l=a(172),m=a(13),f=a(75),v=a.n(f),p=a(29);var d=Object(s.b)((function(e){return{darkMode:e.userPrefsReducer.darkMode,isCelsius:e.userPrefsReducer.isCelsius}}))((function(){return n.a.createElement("nav",null,n.a.createElement("div",{className:"navbar"},n.a.createElement(p.b,{activeClassName:"navlink-active",className:"navlink",to:"/city"},"City View"),n.a.createElement(p.b,{activeClassName:"navlink-active",className:"navlink",to:"/favorites"},"Favorites")))})),h=a(60),y=a(7),E=a.n(y),g=a(16),C=a(164),b=a(167),w={getCityCurrWeather:function(e){return O.apply(this,arguments)},getCityByName:function(e){return x.apply(this,arguments)},getWeatherForecast:function(e){return j.apply(this,arguments)},getWeatherIcon:function(e){e<10&&(e="0"+e);return"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png")},getCityByCoords:function(e,t){return N.apply(this,arguments)},convertCelsiusToFahrenheit:function(e){return Math.round(10*(1.8*e+32))/10},getApiKey:M},k=M();function O(){return(O=Object(g.a)(E.a.mark((function e(t){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:return a=e.sent,e.prev=3,e.next=6,S("https://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=").concat(a,"&details=true"));case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function j(){return(j=Object(g.a)(E.a.mark((function e(t){var a,r,n,c=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(c.length>1&&void 0!==c[1])||c[1],e.next=3,k;case 3:return r=e.sent,e.prev=4,e.next=7,S("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(r,"&metric=").concat(a));case 7:return n=e.sent,e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(4),console.log(e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function N(){return(N=Object(g.a)(E.a.mark((function e(t,a){var r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:return r=e.sent,e.prev=3,e.next=6,S("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat(r,"&q=").concat(t,",").concat(a));case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function x(){return(x=Object(g.a)(E.a.mark((function e(t){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k;case 2:return a=e.sent,e.prev=3,e.next=6,S("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat(a,"&q=").concat(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function S(e){return F.apply(this,arguments)}function F(){return(F=Object(g.a)(E.a.mark((function e(t){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:throw e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function M(){return R.apply(this,arguments)}function R(){return(R=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(g.a)(E.a.mark((function e(t,a){var r,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=["x6SNjBEgOiwSoE0Sm7AFRco0OWsPxKcT","jbQCGr5hw3CneCAiXlvKodc3ASLREpxy","17nM18URNW0l13ncG90uLIxINREYuwzk"],n=0;case 2:if(!(n<r.length)){e.next=16;break}return e.prev=3,e.next=6,S("https://dataservice.accuweather.com/currentconditions/v1/215836?apikey=".concat(r[n],"&details=true"));case 6:return t(r[n]),e.abrupt("return",r[n]);case 10:e.prev=10,e.t0=e.catch(3),console.log("API key not working - switching to next one");case 13:n++,e.next=2;break;case 16:return console.log("no keys"),a(),e.abrupt("return","No keys available");case 19:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,a){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=a(54),I=a.n(T);function D(e){var t=e.city,a=e.onRemoveFavorite,c=e.isCelsius,i=e.darkMode,s=e.onSelectCity,u=Object(r.useState)(null),l=Object(o.a)(u,2),m=l[0],f=l[1];function v(){return(v=Object(g.a)(E.a.mark((function e(){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getCityCurrWeather(t.Key);case 2:a=e.sent,f(a[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){m||function(){v.apply(this,arguments)}()}),[t]),n.a.createElement("div",{onClick:function(){return s(t)},className:"mini-city-container ".concat(i?"dark":"light"," ").concat(function(){if(m)return m.IsDayTime?"day-time":"night-time"}())},n.a.createElement("div",{className:"unfavorite-container"},n.a.createElement(C.a,{title:"Unfavorite city"},n.a.createElement(I.a,{onClick:function(e){e.stopPropagation(),a(t.Key)}}))),n.a.createElement("div",{className:"mini-city-title"},n.a.createElement("h4",null,t.LocalizedName),n.a.createElement("h5",null,t.Country.LocalizedName)),n.a.createElement("div",{className:"mini-city-weather"},m?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"temp"},function(){var e=m.Temperature,t=e.Metric,a=e.Imperial;return c?"".concat(t.Value).concat(t.Unit):"".concat(a.Value).concat(a.Unit)}()),n.a.createElement("div",{className:"icon"},n.a.createElement("img",{src:w.getWeatherIcon(m.WeatherIcon),alt:"weather-icon"}))):n.a.createElement(b.a,null)))}var P=a(128);function _(){var e=Object(m.f)();return n.a.createElement("div",{className:"favorites-empty-state"},n.a.createElement("h2",null,"Oops! looks like you havent added any favorites yet"),n.a.createElement("h3",{className:"cta",onClick:function(){return e.push("/city")}},"Why not add some now?"),n.a.createElement("div",{className:"empty-state-img"},n.a.createElement("img",{src:P,alt:"empty-state-img"})))}function W(e){return function(t){t({type:"SET_CITY",city:e})}}var K=a(129).storageService,A={setFavorites:function(e){return new Promise((function(t){K.saveToStorage("favorites",e),t(!0)}))},getFavorites:function(){return new Promise((function(e){var t=K.loadFromStorage("favorites");return t||(t=[]),e(t)}))}};function V(e){return function(){var t=Object(g.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.setFavorites(e);case 2:a({type:"SET_FAVORITES",favorites:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var L={setFavorites:V,setCurrCity:W,getFavoritesFromStorage:function(){return function(){var e=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getFavorites();case 2:a=e.sent,t({type:"SET_FAVORITES",favorites:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},z=Object(s.b)((function(e){return{favorites:e.favoriteReducer.favorites,isCelsius:e.userPrefsReducer.isCelsius,darkMode:e.userPrefsReducer.darkMode}}),L)((function(e){var t=Object(m.f)();function a(t){var a=Object(h.a)(e.favorites);a=a.filter((function(e){return e.Key!==t})),e.setFavorites(a)}function c(a){e.setCurrCity(a),t.push("/city")}return Object(r.useEffect)((function(){e.getFavoritesFromStorage()}),[]),n.a.createElement("main",{className:"favorites-section"},e.favorites.length?e.favorites.map((function(t){return n.a.createElement(D,{key:t.Key,isCelsius:e.isCelsius,onRemoveFavorite:a,darkMode:e.darkMode,onSelectCity:c,city:t})})):n.a.createElement(_,null))})),B=a(173),U=a(174);var G={setCurrCity:W},J=Object(s.b)((function(e){return{currCity:e.cityReducer.currCity,darkMode:e.userPrefsReducer.darkMode}}),G)((function(e){var t=n.a.useState(""),a=Object(o.a)(t,2),r=a[0],c=a[1],i=n.a.useState([]),s=Object(o.a)(i,2),u=s[0],l=s[1];function m(){return(m=Object(g.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getCityByName(t);case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:l(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){c(e.target.value),function(e){m.apply(this,arguments)}(e.target.value)}return n.a.createElement("div",{className:"search-container"},n.a.createElement(U.a,{onChange:function(t,a){if(a){var r=u.find((function(e){return e.LocalizedName===a}));e.setCurrCity(r)}},style:{width:"100%",maxWidth:"768px"},options:u.map((function(e){return e.LocalizedName})),renderInput:function(e){return n.a.createElement(B.a,Object.assign({},e,{value:r,onChange:f,label:"Find city",style:{width:"100%"},margin:"normal",variant:"outlined"}))}}))})),X=a(169),Y=a(58),q=a.n(Y);function Q(e){var t=e.dailyForecast,a=e.darkMode,r=e.isCelsius,c=new Date(1e3*t.EpochDate).toDateString(),i=r?"C":"F";return n.a.createElement("div",{className:"daily-forecast-day"},n.a.createElement("div",{className:"daily-forecast-bg ".concat(a?"dark":"light")}),n.a.createElement("div",{className:"daily-forecast-date"},c),n.a.createElement("div",{className:"daily-forecast-temp"},function(){var e=t.Temperature,a=r?e.Minimum.Value:w.convertCelsiusToFahrenheit(e.Minimum.Value),n=r?e.Maximum.Value:w.convertCelsiusToFahrenheit(e.Maximum.Value);return"".concat(a).concat(i," - ").concat(n).concat(i)}()),n.a.createElement("div",{className:"daily-forecast-icon"},n.a.createElement("img",{src:w.getWeatherIcon(t.Day.Icon),alt:"weather"})))}var $={setFavorites:V,setCurrCity:W},H=Object(s.b)((function(e){return{currCity:e.cityReducer.currCity,isCelsius:e.userPrefsReducer.isCelsius,favorites:e.favoriteReducer.favorites,darkMode:e.userPrefsReducer.darkMode}}),$)((function(e){var t=n.a.useState(null),a=Object(o.a)(t,2),c=a[0],i=a[1],s=n.a.useState(null),u=Object(o.a)(s,2),l=u[0],m=u[1];function f(e){return v.apply(this,arguments)}function v(){return(v=Object(g.a)(E.a.mark((function t(a){var r,n,c,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.coords,n=r.latitude,c=r.longitude,t.next=3,w.getCityByCoords(n,c);case 3:i=t.sent,e.setCurrCity(i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=Object(g.a)(E.a.mark((function t(a){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(h.a)(e.favorites),a?r.push(e.currCity):r=r.filter((function(t){return t.Key!==e.currCity.Key})),e.setFavorites(r);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=Object(g.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getWeatherForecast(e.currCity.Key,e.isCelsius);case 2:a=t.sent,m(a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=Object(g.a)(E.a.mark((function t(){var a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getCityCurrWeather(e.currCity.Key);case 2:a=t.sent,i(a[0]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(r.useEffect)((function(){navigator.geolocation.getCurrentPosition(f)}),[]),Object(r.useEffect)((function(){e.currCity&&(function(){y.apply(this,arguments)}(),function(){d.apply(this,arguments)}())}),[e.currCity]);var C=e.currCity;return C?n.a.createElement("main",{className:"weather-container ".concat(function(){if(c)return c.IsDayTime?"day-time":"night-time"}())},n.a.createElement("div",{className:"weather-top"},n.a.createElement("div",{className:"city-details"},n.a.createElement("div",{className:"city-name"},C.LocalizedName,", ",C.Country.LocalizedName),n.a.createElement("div",{className:"city-degrees"},c?n.a.createElement(n.a.Fragment,null,e.isCelsius?"".concat(c.Temperature.Metric.Value," C"):"".concat(c.Temperature.Imperial.Value," F")):n.a.createElement(b.a,null))),n.a.createElement("div",{className:"favorite-container"},function(){var t=Boolean(e.favorites.findIndex((function(t){return t.Key===e.currCity.Key}))>=0);return n.a.createElement(X.a,{onClick:function(){return function(e){return p.apply(this,arguments)}(!t)}},t?n.a.createElement(I.a,null):n.a.createElement(q.a,null))}())),n.a.createElement("div",{className:"weather-main"},c?n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{src:w.getWeatherIcon(c.WeatherIcon),alt:"weather-icon"}),n.a.createElement("h2",null,c.WeatherText)):n.a.createElement(b.a,null)),n.a.createElement("div",{className:"weather-forecast"},l?l.DailyForecasts.map((function(t){return n.a.createElement(Q,{key:t.EpochDate,darkMode:e.darkMode,isCelsius:e.isCelsius,dailyForecast:t})})):n.a.createElement(b.a,null))):n.a.createElement(n.a.Fragment,null)}));function Z(e){return n.a.createElement("main",null,n.a.createElement(J,null),n.a.createElement(H,null))}var ee=a(82),te=a.n(ee),ae=a(81),re=a.n(ae),ne=a(84),ce=a(170),ie=a(175),se=a(176),oe=a(177);var ue={setDarkMode:function(e){return function(t){t({type:"SET_DARK_MODE",isDark:e})}},setCelsius:function(e){return function(t){t({type:"SET_DEGREE_SCALE",isCelsius:e})}}},le=Object(s.b)((function(e){return{darkMode:e.userPrefsReducer.darkMode,isCelsius:e.userPrefsReducer.isCelsius}}),ue)((function(e){var t=Object(r.useState)(!1),a=Object(o.a)(t,2),c=a[0],i=a[1],s=n.a.useRef();return n.a.createElement("div",{className:"user-pref-toggles"},n.a.createElement(C.a,{title:"User Preferences"},n.a.createElement(X.a,{ref:s,onClick:function(){return i(!0)}},n.a.createElement(re.a,null))),n.a.createElement(ne.a,{anchorEl:s.current,transformOrigin:{vertical:"bottom",horizontal:"right"},open:c,onClose:function(){return i(!1)}},n.a.createElement(ce.a,null,n.a.createElement(ie.a,{className:"menu-item"},n.a.createElement("span",{className:"switch-off-state"},"Light Mode"),n.a.createElement(se.a,{control:n.a.createElement(oe.a,{checked:e.darkMode,onChange:function(t){return e.setDarkMode(t.target.checked)}})}),n.a.createElement("span",null,"Dark Mode")),n.a.createElement(ie.a,null,n.a.createElement("span",{className:"switch-off-state"},"Fahrenheit"),n.a.createElement(se.a,{control:n.a.createElement(oe.a,{checked:e.isCelsius,onChange:function(t){return e.setCelsius(t.target.checked)}})}),n.a.createElement("span",null,"Celsius")))))})),me=a(130);var fe=Object(s.b)((function(e){return{darkMode:e.userPrefsReducer.darkMode}}))((function(e){var t=Object(r.useState)(0),a=Object(o.a)(t,2),c=a[0],i=a[1],s=Object(m.f)(),f=Object(m.g)();Object(r.useEffect)((function(){var e=f.pathname.includes("favorites")?1:0;i(e)}),[f.pathname]);var p=function(e){var t=e?"favorites":"city";s.push(t)},h=e.darkMode?"dark":"light";return n.a.createElement("div",{className:"App ".concat(h)},n.a.createElement("header",{className:"App-header"},n.a.createElement("div",{className:"logo-container",onClick:function(){return s.push("/")}},n.a.createElement("img",{src:me,alt:"logo"})),n.a.createElement(d,null),n.a.createElement(le,null)),n.a.createElement(v.a,{index:c,onSwitching:p,enableMouseEvents:!0},n.a.createElement(Z,null),n.a.createElement(z,null)),n.a.createElement("div",{className:"bottom-navigation"},n.a.createElement(u.a,{className:h,value:c,onChange:function(e,t){return p(t)}},n.a.createElement(l.a,{className:h,label:"City View",icon:n.a.createElement(te.a,null)}),n.a.createElement(l.a,{className:h,label:"Favorites",icon:n.a.createElement(q.a,null)}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(33),pe=a(83),de=a(25),he={favorites:[]};var ye={currCity:null};var Ee={darkMode:!1,isCelsius:!0};var ge=Object(ve.c)({favoriteReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FAVORITES":return Object(de.a)(Object(de.a)({},e),{},{favorites:t.favorites});default:return e}},cityReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return Object(de.a)(Object(de.a)({},e),{},{currCity:t.city});default:return e}},userPrefsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEGREE_SCALE":return Object(de.a)(Object(de.a)({},e),{},{isCelsius:t.isCelsius});case"SET_DARK_MODE":return Object(de.a)(Object(de.a)({},e),{},{darkMode:t.isDark});default:return e}}}),Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ve.d,be=Object(ve.e)(ge,Ce(Object(ve.a)(pe.a)));a(131);i.a.render(n.a.createElement(p.a,null,n.a.createElement(s.a,{store:be},n.a.createElement(m.c,null,n.a.createElement(m.a,{path:"/",component:fe})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,a){e.exports=a(132)}},[[99,1,2]]]);
//# sourceMappingURL=main.d813b82c.chunk.js.map